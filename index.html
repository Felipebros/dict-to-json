<!DOCTYPE html>
<html lang="pt-BR" class=""><head><script>window.livecodes = window.livecodes || {};</script><title>Dict to Json</title><meta name="title" content="Dict to Json"><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"><style id="__livecodes_styles__">.container,
.container button {
  text-align: center;
  font: 1em sans-serif;
}
.logo {
  width: 150px;
}
</style><script src="https://cdn.jsdelivr.net/npm/brython@3.12.4/brython.min.js"></script><script src="https://cdn.jsdelivr.net/npm/brython@3.12.4/brython_stdlib.js"></script></head><body><div class="container">
  <img class="logo" alt="logo" src="https://livecodes.io/livecodes/assets/templates/python.svg">
  <h1 id="header">Dict para Json</h1>
  <spam id="cumprimento"></spam>
  <!-- <p>You clicked <span id="counter">0</span> times.</p> -->

  <div>
    <textarea id="dict-textarea" rows="20" cols="40" wrap="off"></textarea>

    <textarea id="json-textarea" rows="20" cols="40" wrap="off"></textarea>

    <button id="counter-button">Clique</button>
    <button id="button3">N達o Clique</button>
  </div>
</div>
<script type="text/python">from browser import bind, document, alert
import time

import json
import ast
import datetime

@bind("#button3", "click")
def change(event):
    alert("Hello !")

configuracoes = {
    "identar": True, #@param {type:"boolean"}
    "espacos_identacao": 4, #@param {type:"integer"}
    "ordenar": False, #@param {type:"boolean"}
    "somente_ascii": False, #@param {type:"boolean"}
    "dicionario": "{'result': {'country': {'long_name': 'Brasil', 'short_name': 'BR'}, 'state': {'long_name': 'S達o Paulo', 'short_name': 'SP'}, 'city': {'long_name': 'Ribeir達o Preto', 'short_name': 'Ribeir達o Preto'}, 'district': None, 'neighborhood': {'long_name': 'Distrito de Bonfim Paulista', 'short_name': 'Distrito de Bonfim Paulista'}, 'street': {'long_name': '9', 'short_name': '9'}, 'slug': '9-distrito-de-bonfim-paulista-ribeirao-preto-sp-brasil', 'geometry': {'location': {'lat': -21.2345726, 'lng': -47.8181069}, 'viewport': {'northeast': {'lat': -21.2332236197085, 'lng': -47.81675791970851}, 'southwest': {'lat': -21.23592158029151, 'lng': -47.81945588029151}}}}}", #@param {type:"string"}
}
document['dict-textarea'].text = configuracoes["dicionario"]

def transformar_dict_em_json(configuracoes):
    configuracoes["dicionario"] = document['dict-textarea'].text
    configuracoes["dicionario"] = eval(configuracoes["dicionario"])
    if configuracoes["identar"]:
        app_json = json.dumps(
            configuracoes["dicionario"],
            indent=configuracoes["espacos_identacao"],
            ensure_ascii=configuracoes["somente_ascii"],
            sort_keys=configuracoes["ordenar"],
            default=str
        )
    else:
        app_json = json.dumps(configuracoes["dicionario"], default=str)

    document['json-textarea'].text = app_json

transformar_dict_em_json(configuracoes)
document["counter-button"].bind("click", transformar_dict_em_json(configuracoes))

# title = 'Python'
# document['header'].html = f"Hello, {title}!"

# counter = 0

# def increment(ev):
#     global counter
#     counter += 1
#     document['counter'].html = str(counter)

# document["counter-button"].bind("click", increment)

# # check console
# current_time = int(time.strftime('%H'))
# if current_time < 12 :
#       print('Good morning')
#       document['cumprimento'].html = 'Good morning'
# elif 12 <= current_time < 18:
#       print('Good afternoon')
#       document['cumprimento'].html = 'Good afternoon'
# else:
#       print('Good evening')
#       document['cumprimento'].html = 'Good evening'
</script></body></html>